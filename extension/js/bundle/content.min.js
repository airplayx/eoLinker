webpackJsonp([1],{

/***/ 133:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _stringify = __webpack_require__(3);

var _stringify2 = _interopRequireDefault(_stringify);

var _promise = __webpack_require__(29);

var _promise2 = _interopRequireDefault(_promise);

var _regenerator = __webpack_require__(38);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _asyncToGenerator2 = __webpack_require__(39);

var _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);

var _assign = __webpack_require__(10);

var _assign2 = _interopRequireDefault(_assign);

var _contentUtils = __webpack_require__(30);

var _constant = __webpack_require__(6);

var _auto = __webpack_require__(135);

var _batch = __webpack_require__(136);

var _autoCode = __webpack_require__(137);

var _normal = __webpack_require__(138);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

$(function () {

    var dom = document.getElementById("plug-inner-script");

    var isEolinker = false;
    try {
        var content = $('meta[name="author"]')[0].content;
        isEolinker = content == '广州银云信息科技有限公司' || content == 'EOLINKER Co.,Ltd.';
    } catch (e) {}

    if (isEolinker) {
        if (dom) {
            dom.innerHTML = "window.plug = {type: 'application/eolinker',version:504}";
        } else {
            var newScript = document.createElement("script");
            newScript.innerHTML = "window.plug = {type: 'application/eolinker',version:504}";
            var firstScript = document.getElementsByTagName("script")[0];
            firstScript.parentNode.insertBefore(newScript, firstScript);
        }
    }

    function InitState() {

        if (isEolinker) {
            var productInfo = _contentUtils.CONTENT_TOOLS.getProductInfo();
            _contentUtils.GLOBALVAL.product.productType = productInfo.productType;
            _contentUtils.GLOBALVAL.product.LANG = _contentUtils.GLOBALVAL.product.productType == 5 ? "en" : "cn";
            _contentUtils.GLOBALVAL.product.version = productInfo.version;
            if (_contentUtils.GLOBALVAL.product.productType) {
                _contentUtils.GLOBALVAL.info.hashArgs = _contentUtils.CONTENT_TOOLS.getHashStringArgs();
                _contentUtils.GLOBALVAL.info.location = window.location;

                var testType = _contentUtils.CONTENT_TOOLS.judgeWhichTest();
                if (testType) {
                    if (!_contentUtils.GLOBALVAL.product.hasConsole) {
                        _contentUtils.GLOBALVAL.product.hasConsole = true;
                        console.log("%c   welcome,eolinker_extension", "font-size:14px;color:#4caf50;font-weight:bold;background:url('https://www.eolinker.com/assets/images/favicon.ico') no-repeat;background-size:14px;background-position:top left;");
                    }

                    if (/(\/project\/inside\/api\/test)|(\/inside\/api\/case)|(automatic\/inside\/scene)|(automatic\/inside\/cenario)|(\/inside\/quickTest)|(\/inside\/test\/admin\/\?)/i.test(_contentUtils.GLOBALVAL.info.location.href)) {
                        getFunctionDataList();
                    } else if (/(\/share\/project\/test)|(\/share\/project\/api\/test)/i.test(_contentUtils.GLOBALVAL.info.location.href) || _contentUtils.GLOBALVAL.product.productType == 2) {
                        getFunctionDataList();
                    }
                }
                switch (testType) {
                    case 'normal':
                        {
                            (0, _normal.normalTest)();
                            break;
                        }
                    case 'case':
                        {
                            (0, _batch.batchTest)();
                            break;
                        }
                    case 'autoUi':
                    case 'envUi':
                        {
                            (0, _auto.autoUiTest)(testType);
                            break;
                        }
                    case 'autoCode':
                    case 'envCode':
                        {
                            (0, _autoCode.autoCodeTest)(testType);
                            break;
                        }

                    case 'autoBatch':
                        {
                            batchAutoTest();
                            break;
                        }
                    case 'share':
                        {
                            (0, _normal.normalTest)('share');
                            break;
                        }
                }
            }
        }
    }

    function batchAutoTest() {
        _contentUtils.CONTENT_TOOLS.initFun();
        var location = _contentUtils.GLOBALVAL.info.location.origin + _contentUtils.GLOBALVAL.info.location.pathname;
        var apiUrl = 'automatedTest/AutomatedTestCase/getTestCaseList';
        var apiUrl1 = 'automatedTest/AutomatedTestHistory/addTestHistory';
        var apiUrl2 = 'automatedTest/AutomatedTestHistory/addTestLog';
        var content = null;
        var changeFlagePrevious = 1;
        var isQuerying = false;
        var ajaxStatus = false;
        if (_contentUtils.GLOBALVAL.info.hashArgs['groupID'] == -2 || _contentUtils.GLOBALVAL.info.hashArgs['groupID'] == -3) return;
        switch (Number(_contentUtils.GLOBALVAL.product.productType)) {
            case 1:
            case 5:
                {

                    apiUrl = 'automatedTest/AutomatedTestCase/getTestCaseDataList';
                    apiUrl1 = 'automatedTest/AutomatedTestHistory/addTestHistory';
                    break;
                }
            case 0:
                {

                    location = _contentUtils.GLOBALVAL.info.location.origin + _contentUtils.GLOBALVAL.info.location.pathname.replace(/index\.php$/i, '');
                    apiUrl = 'server/index.php?g=Web&c=AutomatedTestCase&o=getTestCaseDataList';
                    break;
                }
            case 3:
                {

                    location = _contentUtils.GLOBALVAL.info.location.origin + _contentUtils.GLOBALVAL.info.location.pathname.replace(/index\.html$/i, '');
                    apiUrl = 'AutomatedTestCase/getTestCaseDataList';
                    break;
                }
            default:
                {

                    location = _contentUtils.GLOBALVAL.info.location.origin + _contentUtils.GLOBALVAL.info.location.pathname.replace(/independent\/$/i, '');
                    apiUrl = _contentUtils.GLOBALVAL.info.prefixStr + 'automatedTest/AutomatedTestCase/getTestCaseDataList';
                    apiUrl2 = _contentUtils.GLOBALVAL.info.prefixStr + 'automatedTest/AutomatedTestHistory/addTestLog';
                    apiUrl1 = _contentUtils.GLOBALVAL.info.prefixStr + 'automatedTest/AutomatedTestHistory/addTestHistory';
                }
        }

        function getBatchData(which, data, index, env) {
            switch (which.toString()) {
                case '0':
                    {

                        return {
                            singleCaseList: data.singleCaseList,
                            productType: _contentUtils.GLOBALVAL.product.productType,
                            version: _contentUtils.GLOBALVAL.product.version,
                            index: 0,
                            batchIndex: index,
                            location: location,
                            env: env,
                            commonFunList: _contentUtils.GLOBALVAL.info.commonFunList,
                            beforeCase: {
                                envCaseList: data.beforeCaseList || false,
                                env: env
                            },
                            afterCase: {
                                envCaseList: data.afterCaseList || false,
                                env: env
                            }
                        };
                        break;
                    }
                default:
                    {
                        return {
                            caseCode: data.caseCode,
                            productType: _contentUtils.GLOBALVAL.product.productType,
                            version: _contentUtils.GLOBALVAL.product.version,
                            env: env,
                            batchIndex: index,
                            commonFunList: _contentUtils.GLOBALVAL.info.commonFunList,
                            beforeCase: {
                                envCaseList: data.beforeCaseList || false,
                                env: env
                            },
                            afterCase: {
                                envCaseList: data.afterCaseList || false,
                                env: env
                            }
                        };
                    }
            }
        }

        function getBatchAutoTest(orderBy, asc, connID, condition, keyWord) {
            isQuerying = true;
            content = null;
            var request = {
                companyHashKey: _contentUtils.GLOBALVAL.info.hashArgs.companyHashKey,
                spaceKey: _contentUtils.GLOBALVAL.info.hashArgs.spaceKey,
                projectHashKey: _contentUtils.GLOBALVAL.info.hashArgs.projectHashKey,
                projectID: _contentUtils.GLOBALVAL.info.hashArgs.projectID,
                orderBy: orderBy,
                asc: asc,
                condition: condition,
                connID: connID || null,
                groupID: -1
            };
            request.groupID = _contentUtils.GLOBALVAL.info.hashArgs['grandSonGroupID'] != undefined ? _contentUtils.GLOBALVAL.info.hashArgs['grandSonGroupID'] : _contentUtils.GLOBALVAL.info.hashArgs['childGroupID'] != undefined ? _contentUtils.GLOBALVAL.info.hashArgs['childGroupID'] : _contentUtils.GLOBALVAL.info.hashArgs['groupID'] == undefined ? 0 : _contentUtils.GLOBALVAL.info.hashArgs['groupID'] == -1 ? 0 : _contentUtils.GLOBALVAL.info.hashArgs['groupID'];
            $.ajax({
                url: location + apiUrl,
                method: 'POST',
                contentType: 'application/x-www-form-urlencoded;charset=UTF-8',
                data: request
            }).done(function (successData, textStatus, xhr) {
                isQuerying = false;
                try {
                    successData = JSON.parse(successData);
                } catch (e) {}
                if (successData.statusCode == '000000') {
                    try {
                        content = JSON.parse(successData).caseList;
                    } catch (e) {
                        content = successData.caseList;
                    }
                } else {
                    content = [];
                }
            }).fail(function (xhr, textStatus) {}).always(function () {});
        }
        var report = {
            time: '0ms',
            totalCase: 0,
            successCase: 0,
            errorCase: 0,
            responseList: [],
            status: 'testing'
        };
        var data = {
            time: {
                init: null
            },
            num: 0
        };
        var fun = {};
        var isBreak = false;
        var webContent = null;
        fun.queryDate = function () {
            function query1() {
                if ($("#automated-text").text()) {
                    try {
                        var webContent = JSON.parse($("#automated-text").text());
                        webContent.filter = webContent.filter || {};
                        clearInterval(_contentUtils.GLOBALVAL.fun.interval1);
                        getBatchAutoTest(webContent.filter.orderBy, webContent.filter.asc, webContent.filter.connID, webContent.filter.condition, webContent.filter.search);
                    } catch (e) {}
                }
            }
            _contentUtils.GLOBALVAL.fun.interval1 = setInterval(query1, 500);
        };
        fun.queryDate();

        function queryBtn() {
            function query() {
                data.num++;
                var btnSend = $('button.batch-test-btn');

                var filterContent = null;
                if (content !== null) {
                    if (webContent && webContent.filter.search) {
                        filterContent = [];
                        content.forEach(function (val, key) {
                            if (val.caseName.indexOf(webContent.filter.search) > -1) {
                                filterContent.push(val);
                            }
                        });
                    } else {
                        filterContent = (0, _assign2.default)([], content);
                    }
                }
                $('#automated-text').unbind('DOMCharacterDataModified');
                try {
                    changeFlagePrevious = JSON.parse($("#automated-text").text()).flag;
                } catch (e) {}
                $('#automated-text').bind('DOMCharacterDataModified', function (e) {
                    webContent = JSON.parse($("#automated-text").text());
                    if (content !== null) {
                        filterContent = [];
                    } else {
                        filterContent = null;
                    }
                    webContent.filter = webContent.filter || {};
                    if (changeFlagePrevious != webContent.flag) {
                        getBatchAutoTest(webContent.filter.orderBy, webContent.filter.asc, webContent.filter.connID, webContent.filter.condition, webContent.filter.search);
                        queryBtn();
                        changeFlagePrevious = webContent.flag;
                    } else if (webContent.filter.search) {
                        if (content) {
                            content.forEach(function (val, key) {
                                if (val.caseName.indexOf(webContent.filter.search) > -1) {
                                    filterContent.push(val);
                                }
                            });
                        }
                    } else {
                        filterContent = (0, _assign2.default)([], content);
                    }
                });
                fun.removeListener = function (callback) {
                    if (callback) {
                        _contentUtils.GLOBALVAL.port.autoCode.onMessage.removeListener(callback);
                        _contentUtils.GLOBALVAL.port.auto.onMessage.removeListener(callback);
                    }
                };
                if (data.num == 100) {
                    clearInterval(_contentUtils.GLOBALVAL.fun.interval);
                    data.num = 0;
                }
                $('.batch-test-btn').off('mousedown');
                $('.batch-test-btn').on('mousedown', function (e) {
                    if (isQuerying == true) {
                        e.stopPropagation();
                        alert(_constant.CONSTANT.LANG.Tips.lowNetWork[_contentUtils.GLOBALVAL.product.LANG]);
                    }
                });
                if (filterContent != null && (filterContent.length == btnSend.length - 2 || btnSend.length == 2)) {
                    clearInterval(_contentUtils.GLOBALVAL.fun.interval);
                    data.num = 0;
                    $('.batch-test-btn').off('click');
                    $('.batch-test-btn').on('click', function () {
                        var webResult = $("#plug-batch-in-result-js");

                        if ($(this).attr('testing') == 'true') {
                            var index = $('button.batch-test-btn').index($(this));

                            var index1 = $('a.batch-test-btn').index($(this));
                            var isAsync = true;

                            if (index == 0 || index1 == 1 || _contentUtils.GLOBALVAL.product.productType == 0) {
                                isAsync = true;
                            } else {
                                isAsync = false;
                            }
                            if (index == 1 || index == -1) {
                                index = 0;
                            }
                            isBreak = false;
                            report = {
                                time: '0ms',
                                totalCase: 0,
                                successCase: 0,
                                errorCase: 0,
                                responseList: [],
                                status: 'testing'
                            };
                            var plugDate = {
                                responseList: [],
                                status: "testing"
                            };
                            var env = {};
                            try {
                                env = JSON.parse($("#automated-text").text()).env;
                            } catch (e) {}
                            report.totalCase = filterContent.length;
                            _contentUtils.GLOBALVAL.port.autoCode = chrome.runtime.connect({
                                name: "autoCodeTest"
                            });
                            _contentUtils.GLOBALVAL.port.auto = chrome.runtime.connect({
                                name: "autoUiTest"
                            });
                            report.responseList = new Array(report.totalCase);
                            data.time.init = new Date();
                            var batchList = [];
                            if (index == 0) {
                                batchList = filterContent;
                            } else {
                                batchList.push(filterContent[index - 2]);
                            }
                            switch (isAsync) {
                                case false:
                                    {
                                        var asyncControl = function () {
                                            var _ref = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee() {
                                                var i;
                                                return _regenerator2.default.wrap(function _callee$(_context) {
                                                    while (1) {
                                                        switch (_context.prev = _context.next) {
                                                            case 0:
                                                                i = 0;

                                                            case 1:
                                                                if (!(i < batchList.length)) {
                                                                    _context.next = 9;
                                                                    break;
                                                                }

                                                                if (!isBreak) {
                                                                    _context.next = 4;
                                                                    break;
                                                                }

                                                                return _context.abrupt('break', 9);

                                                            case 4:
                                                                _context.next = 6;
                                                                return Synchronization(batchList, i);

                                                            case 6:
                                                                i++;
                                                                _context.next = 1;
                                                                break;

                                                            case 9:
                                                            case 'end':
                                                                return _context.stop();
                                                        }
                                                    }
                                                }, _callee, this);
                                            }));

                                            return function asyncControl() {
                                                return _ref.apply(this, arguments);
                                            };
                                        }();

                                        var Synchronization = function Synchronization(batchList, i) {
                                            return new _promise2.default(function (resolve, reject) {
                                                switch (batchList[i].caseType.toString()) {
                                                    case '1':
                                                        {

                                                            var caseCodeList = getBatchData('1', batchList[i], i, env);
                                                            _contentUtils.GLOBALVAL.port.autoCode.postMessage(caseCodeList);
                                                            break;
                                                        }
                                                    case '0':
                                                        {

                                                            var caseList = getBatchData('0', batchList[i], i, env);
                                                            _contentUtils.GLOBALVAL.port.auto.postMessage(caseList);
                                                            break;
                                                        }
                                                }

                                                fun.removeListener(fun.callback);
                                                fun.callback = function (backResult) {
                                                    if (!isBreak) {
                                                        var isEnd = true;
                                                        if (index == 0) {
                                                            report.time = (new Date() - data.time.init) / 1000 + 's';
                                                            backResult.caseName = filterContent[backResult.batchIndex].caseName;
                                                            backResult.caseID = filterContent[backResult.batchIndex].caseID;
                                                            backResult.caseType = filterContent[backResult.batchIndex].caseType;
                                                            report.responseList[backResult.batchIndex] = backResult;

                                                            for (i = 0; i < filterContent.length; i++) {
                                                                if (report.responseList[i] != null) {} else {
                                                                    report.responseList[i] = null;
                                                                }
                                                            }
                                                            for (var i = 0; i < report.responseList.length; i++) {
                                                                if (report.responseList[i] == null) {
                                                                    isEnd = false;
                                                                }
                                                            }
                                                            if (isEnd == true) {
                                                                plugDate.status = 'tested';
                                                                report.status = 'tested';
                                                            }
                                                            if (backResult.reportStatus == 'finish' || backResult.status == 'finish') {
                                                                report.successCase++;
                                                            } else {
                                                                report.errorCase++;
                                                            }
                                                            window.sessionStorage.setItem('plug-background-result', (0, _stringify2.default)(report));
                                                            webResult.text((0, _stringify2.default)(plugDate));
                                                            resolve('success');
                                                            if (isEnd == true && (_contentUtils.GLOBALVAL.product.productType == 1 || _contentUtils.GLOBALVAL.product.productType == 5 || _contentUtils.GLOBALVAL.product.productType == 2)) {
                                                                $.ajax({
                                                                    url: location + apiUrl1,
                                                                    method: 'POST',
                                                                    contentType: 'application/x-www-form-urlencoded;charset=UTF-8',
                                                                    data: {
                                                                        companyHashKey: _contentUtils.GLOBALVAL.info.hashArgs.companyHashKey,
                                                                        spaceKey: _contentUtils.GLOBALVAL.info.hashArgs.spaceKey,
                                                                        projectHashKey: _contentUtils.GLOBALVAL.info.hashArgs.projectHashKey,
                                                                        result: (0, _stringify2.default)(report),
                                                                        groupID: _contentUtils.GLOBALVAL.info.hashArgs['grandSonGroupID'] != undefined ? _contentUtils.GLOBALVAL.info.hashArgs['grandSonGroupID'] : _contentUtils.GLOBALVAL.info.hashArgs['childGroupID'] != undefined ? _contentUtils.GLOBALVAL.info.hashArgs['childGroupID'] : _contentUtils.GLOBALVAL.info.hashArgs['groupID'] == undefined ? 0 : _contentUtils.GLOBALVAL.info.hashArgs['groupID'] == -1 ? 0 : _contentUtils.GLOBALVAL.info.hashArgs['groupID']

                                                                    }
                                                                }).done(function (successData, textStatus, xhr) {}).fail(function (xhr, textStatus) {
                                                                    console.log('Add History Fail');
                                                                });
                                                            }
                                                        } else {
                                                            report.time = (new Date() - data.time.init) / 1000 + 's';
                                                            report.responseList = [backResult];
                                                            report.status = 'tested';
                                                            if (backResult.reportStatus == 'finish' || backResult.status == 'finish') {
                                                                report.successCase++;
                                                            } else {
                                                                report.errorCase++;
                                                            }
                                                            window.sessionStorage.setItem('plug-background-result', (0, _stringify2.default)(report));
                                                            plugDate.status = 'tested';
                                                            webResult.text((0, _stringify2.default)(plugDate));
                                                            resolve('success');
                                                            if (_contentUtils.GLOBALVAL.product.productType == 1 || _contentUtils.GLOBALVAL.product.productType == 2 || _contentUtils.GLOBALVAL.product.productType == 5) {
                                                                $.ajax({
                                                                    url: location + apiUrl2,
                                                                    method: 'POST',
                                                                    contentType: 'application/x-www-form-urlencoded;charset=UTF-8',
                                                                    data: {
                                                                        caseID: batchList[0].caseID,
                                                                        companyHashKey: _contentUtils.GLOBALVAL.info.hashArgs.companyHashKey,
                                                                        spaceKey: _contentUtils.GLOBALVAL.info.hashArgs.spaceKey,
                                                                        projectHashKey: _contentUtils.GLOBALVAL.info.hashArgs.projectHashKey,
                                                                        result: (0, _stringify2.default)(backResult)
                                                                    }
                                                                }).done(function (successData, textStatus, xhr) {}).fail(function (xhr, textStatus) {
                                                                    console.log('Add History Fail');
                                                                });
                                                            }
                                                        }
                                                    }
                                                };
                                                _contentUtils.GLOBALVAL.port.autoCode.onMessage.addListener(fun.callback);
                                                _contentUtils.GLOBALVAL.port.auto.onMessage.addListener(fun.callback);
                                            });
                                        };

                                        asyncControl().then(function () {}).catch(function (e) {
                                            console.log(e);
                                        });
                                        break;
                                    }
                                default:
                                    {

                                        for (var i = 0; i < batchList.length; i++) {
                                            if (isBreak) break;
                                            switch (batchList[i].caseType.toString()) {
                                                case '1':
                                                    {

                                                        var caseCodeList = getBatchData('1', batchList[i], i, env);
                                                        _contentUtils.GLOBALVAL.port.autoCode.postMessage(caseCodeList);
                                                        break;
                                                    }
                                                case '0':
                                                    {

                                                        var caseList = getBatchData('0', batchList[i], i, env);
                                                        _contentUtils.GLOBALVAL.port.auto.postMessage(caseList);
                                                        break;
                                                    }
                                            }
                                        }
                                        fun.removeListener(fun.callback);
                                        fun.callback = function (backResult) {
                                            if (!isBreak) {
                                                if (index == 0) {
                                                    report.time = (new Date() - data.time.init) / 1000 + 's';
                                                    backResult.caseName = filterContent[backResult.batchIndex].caseName;
                                                    backResult.caseID = filterContent[backResult.batchIndex].caseID;
                                                    backResult.caseType = filterContent[backResult.batchIndex].caseType;
                                                    report.responseList[backResult.batchIndex] = backResult;
                                                    var isEnd = true;

                                                    for (i = 0; i < filterContent.length; i++) {
                                                        if (report.responseList[i] != null) {} else {
                                                            report.responseList[i] = null;
                                                        }
                                                    }
                                                    for (var i = 0; i < report.responseList.length; i++) {

                                                        if (report.responseList[i] == null) {
                                                            isEnd = false;
                                                        }
                                                    }
                                                    if (isEnd == true) {
                                                        plugDate.status = 'tested';
                                                        report.status = 'tested';
                                                    }
                                                    if (backResult.reportStatus == 'finish' || backResult.status == 'finish') {
                                                        report.successCase++;
                                                    } else {
                                                        report.errorCase++;
                                                    }
                                                    window.sessionStorage.setItem('plug-background-result', (0, _stringify2.default)(report));
                                                    webResult.text((0, _stringify2.default)(plugDate));
                                                    if (isEnd == true && (_contentUtils.GLOBALVAL.product.productType == 1 || _contentUtils.GLOBALVAL.product.productType == 2 || _contentUtils.GLOBALVAL.product.productType == 5)) {
                                                        $.ajax({
                                                            url: location + apiUrl1,
                                                            method: 'POST',
                                                            contentType: 'application/x-www-form-urlencoded;charset=UTF-8',
                                                            data: {
                                                                companyHashKey: _contentUtils.GLOBALVAL.info.hashArgs.companyHashKey,
                                                                spaceKey: _contentUtils.GLOBALVAL.info.hashArgs.spaceKey,
                                                                projectHashKey: _contentUtils.GLOBALVAL.info.hashArgs.projectHashKey,
                                                                result: (0, _stringify2.default)(report),
                                                                groupID: _contentUtils.GLOBALVAL.info.hashArgs['grandSonGroupID'] != undefined ? _contentUtils.GLOBALVAL.info.hashArgs['grandSonGroupID'] : _contentUtils.GLOBALVAL.info.hashArgs['childGroupID'] != undefined ? _contentUtils.GLOBALVAL.info.hashArgs['childGroupID'] : _contentUtils.GLOBALVAL.info.hashArgs['groupID'] == undefined ? 0 : _contentUtils.GLOBALVAL.info.hashArgs['groupID'] == -1 ? 0 : _contentUtils.GLOBALVAL.info.hashArgs['groupID']

                                                            }
                                                        }).done(function (successData, textStatus, xhr) {}).fail(function (xhr, textStatus) {
                                                            console.log('Add History Fail');
                                                        });
                                                    }
                                                } else {
                                                    report.time = (new Date() - data.time.init) / 1000 + 's';
                                                    report.responseList = [backResult];
                                                    report.status = 'tested';
                                                    if (backResult.reportStatus == 'finish' || backResult.status == 'finish') {
                                                        report.successCase++;
                                                    } else {
                                                        report.errorCase++;
                                                    }
                                                    window.sessionStorage.setItem('plug-background-result', (0, _stringify2.default)(report));
                                                    plugDate.status = 'tested';
                                                    webResult.text((0, _stringify2.default)(plugDate));
                                                }
                                            }
                                        };
                                        _contentUtils.GLOBALVAL.port.autoCode.onMessage.addListener(fun.callback);
                                        _contentUtils.GLOBALVAL.port.auto.onMessage.addListener(fun.callback);
                                    }
                            }
                        }
                        $('.batch-test-btn').on('click', function () {
                            if ($(this).attr('testing') == 'false') {
                                fun.removeListener(fun.callback);
                                isBreak = true;
                                report.time = (new Date() - data.time.init) / 1000 + 's';
                                report.status = 'tested';
                                window.sessionStorage.setItem('plug-background-result', (0, _stringify2.default)(report));
                                _contentUtils.GLOBALVAL.port.autoCode.postMessage({
                                    stopStatus: true
                                });
                                _contentUtils.GLOBALVAL.port.auto.postMessage({
                                    index: 0,
                                    stopStatus: true
                                });
                            }
                        });
                    });
                }
            }
            _contentUtils.GLOBALVAL.fun.interval = setInterval(query, 500);
        }
        queryBtn();
    }

    function getFunctionDataList() {
        var apiUrl = null;
        var location = _contentUtils.GLOBALVAL.info.location.origin + _contentUtils.GLOBALVAL.info.location.pathname;
        var request = {
            companyHashKey: _contentUtils.GLOBALVAL.info.hashArgs.companyHashKey,
            spaceKey: _contentUtils.GLOBALVAL.info.hashArgs.spaceKey,
            projectHashKey: _contentUtils.GLOBALVAL.info.hashArgs.projectHashKey,
            shareCode: _contentUtils.GLOBALVAL.info.hashArgs.shareCode,
            shareID: _contentUtils.GLOBALVAL.info.hashArgs.shareID
        };
        switch (Number(_contentUtils.GLOBALVAL.product.productType)) {
            case 1:
            case 5:
                {
                    if (/(\/share\/project\/test)|(\/share\/project\/api\/test)/i.test(_contentUtils.GLOBALVAL.info.location.href)) {
                        apiUrl = 'apiManagementPro/Share/getFunctionDataList';
                    } else {

                        if (_contentUtils.GLOBALVAL.product.version >= '5.0') {
                            apiUrl = 'generalFunction/CommonFunction/getFunctionDataList';
                            if (/(\/automatic\/inside\/cenario)|(\/automatic\/inside\/scene)/i.test(_contentUtils.GLOBALVAL.info.location.href)) {
                                request.module = 1;
                            } else {
                                request.module = 0;
                            }
                        } else {
                            if (/(\/automatic\/inside\/cenario)|(\/automatic\/inside\/scene)/i.test(_contentUtils.GLOBALVAL.info.location.href)) {
                                apiUrl = 'automatedTest/CommonFunction/getFunctionDataList';
                            } else {
                                apiUrl = 'apiManagementPro/CommonFunction/getFunctionDataList';
                            }
                        }
                    }
                    break;
                }
            case 2:
                {
                    location = _contentUtils.GLOBALVAL.info.location.origin + _contentUtils.GLOBALVAL.info.location.pathname.replace(/independent\/$/i, '');
                    if (/\/share\/project\/test/i.test(_contentUtils.GLOBALVAL.info.location.href)) {
                        apiUrl = _contentUtils.GLOBALVAL.info.prefixStr + 'apiManagementPro/Share/getFunctionDataList';
                    } else if (/(\/automatic\/inside\/cenario)|(\/automatic\/inside\/scene)/i.test(_contentUtils.GLOBALVAL.info.location.href)) {
                        apiUrl = _contentUtils.GLOBALVAL.info.prefixStr + 'automatedTest/CommonFunction/getFunctionDataList';
                    } else {
                        apiUrl = _contentUtils.GLOBALVAL.info.prefixStr + 'apiManagementPro/CommonFunction/getFunctionDataList';
                    }
                    break;
                }
            default:
                {
                    return;
                }
        }
        $.ajax({
            url: location + apiUrl,
            method: 'POST',
            contentType: 'application/x-www-form-urlencoded;charset=UTF-8',
            data: request
        }).done(function (successData, textStatus, xhr) {
            try {
                successData = JSON.parse(successData);
            } catch (e) {}
            if (successData.statusCode == '000000') {
                try {
                    _contentUtils.GLOBALVAL.info.commonFunList = JSON.parse(successData).functionList;
                } catch (e) {
                    _contentUtils.GLOBALVAL.info.commonFunList = successData.functionList;
                }
            } else {
                _contentUtils.GLOBALVAL.info.commonFunList = [];
            }
        }).fail(function (xhr, textStatus) {});
    }
    InitState();
    window.onhashchange = InitState;
});

/***/ }),

/***/ 134:
/***/ (function(module, exports) {

exports.endianness = function () { return 'LE' };

exports.hostname = function () {
    if (typeof location !== 'undefined') {
        return location.hostname
    }
    else return '';
};

exports.loadavg = function () { return [] };

exports.uptime = function () { return 0 };

exports.freemem = function () {
    return Number.MAX_VALUE;
};

exports.totalmem = function () {
    return Number.MAX_VALUE;
};

exports.cpus = function () { return [] };

exports.type = function () { return 'Browser' };

exports.release = function () {
    if (typeof navigator !== 'undefined') {
        return navigator.appVersion;
    }
    return '';
};

exports.networkInterfaces
= exports.getNetworkInterfaces
= function () { return {} };

exports.arch = function () { return 'javascript' };

exports.platform = function () { return 'browser' };

exports.tmpdir = exports.tmpDir = function () {
    return '/tmp';
};

exports.EOL = '\n';

exports.homedir = function () {
	return '/'
};


/***/ }),

/***/ 135:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.autoUiTest = undefined;

var _stringify = __webpack_require__(3);

var _stringify2 = _interopRequireDefault(_stringify);

var _contentUtils = __webpack_require__(30);

var _constant = __webpack_require__(6);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var autoUiTest = exports.autoUiTest = function autoUiTest(testType) {
    _contentUtils.CONTENT_TOOLS.initFun();
    var plugDate = {
        responseList: [],
        status: "tested"
    };
    var location = _contentUtils.GLOBALVAL.info.location.origin + _contentUtils.GLOBALVAL.info.location.pathname;
    var apiUrl = 'automatedTest/AutomatedTestCaseSingle/getSingleCaseList';
    var apiUrl1 = 'automatedTest/AutomatedTestHistory/addTestLog';
    var apiUrl2 = 'automatedTest/AutomatedTestHistory/addSingleCaseTestLog';
    var content = {};
    var beforeCaseList = false;
    var changeFlagePrevious = 0;
    var isBreak = false;
    var isQuerying = false;
    switch (Number(_contentUtils.GLOBALVAL.product.productType)) {
        case 1:
        case 5:
            {
                apiUrl = 'automatedTest/AutomatedTestCaseSingle/getSingleCaseList';
                apiUrl1 = 'automatedTest/AutomatedTestHistory/addTestLog';
                apiUrl2 = 'automatedTest/AutomatedTestHistory/addSingleCaseTestLog';
                break;
            }
        case 0:
            {
                location = _contentUtils.GLOBALVAL.info.location.origin + _contentUtils.GLOBALVAL.info.location.pathname.replace(/index\.php$/i, '');
                apiUrl = 'server/index.php?g=Web&c=AutomatedTestCaseSingle&o=getSingleTestCaseList';
                break;
            }
        case 3:
            {
                location = _contentUtils.GLOBALVAL.info.location.origin + _contentUtils.GLOBALVAL.info.location.pathname.replace(/index\.html$/i, '');
                apiUrl = 'AutomatedTestCaseSingle/getSingleTestCaseList';
                break;
            }
        default:
            {
                location = _contentUtils.GLOBALVAL.info.location.origin + _contentUtils.GLOBALVAL.info.location.pathname.replace(/independent\/$/i, '');
                apiUrl = _contentUtils.GLOBALVAL.info.prefixStr + 'automatedTest/AutomatedTestCaseSingle/getSingleCaseList';
                apiUrl1 = _contentUtils.GLOBALVAL.info.prefixStr + 'automatedTest/AutomatedTestHistory/addTestLog';
                apiUrl2 = _contentUtils.GLOBALVAL.info.prefixStr + 'automatedTest/AutomatedTestHistory/addSingleCaseTestLog';
            }
    }

    function getSingleCaseList() {
        isQuerying = true;
        $.ajax({
            url: location + apiUrl,
            method: 'POST',
            contentType: 'application/x-www-form-urlencoded;charset=UTF-8',
            data: {
                companyHashKey: _contentUtils.GLOBALVAL.info.hashArgs.companyHashKey,
                spaceKey: _contentUtils.GLOBALVAL.info.hashArgs.spaceKey,
                projectHashKey: _contentUtils.GLOBALVAL.info.hashArgs.projectHashKey,
                caseID: _contentUtils.GLOBALVAL.info.hashArgs.caseID,
                projectID: _contentUtils.GLOBALVAL.info.hashArgs.projectID,
                module: testType == 'envUi' ? 1 : null
            }
        }).done(function (successData, textStatus, xhr) {
            isQuerying = false;
            try {
                content = JSON.parse(successData);
            } catch (e) {
                content = successData;
            }
        }).fail(function (xhr, textStatus) {});
    }
    getSingleCaseList();

    function queryBtn() {
        function query() {
            var btnSend = $('button.batch-test-btn');
            $('#automated-text').unbind('DOMCharacterDataModified');
            try {
                changeFlagePrevious = JSON.parse($("#automated-text").text()).flag;
            } catch (e) {}
            $('#automated-text').bind('DOMCharacterDataModified', function (e) {
                var webContent = JSON.parse($("#automated-text").text());
                if (changeFlagePrevious != webContent.flag) {
                    getSingleCaseList();
                    changeFlagePrevious = webContent.flag;
                }
            });
            $(document).on('mousedown', '.batch-test-btn', function (e) {
                if (isQuerying == true) {
                    e.stopPropagation();
                    alert(_constant.CONSTANT.LANG.Tips.lowNetWork[_contentUtils.GLOBALVAL.product.LANG]);
                }
            });
            content.singleCaseList = content.singCaseList || content.singleCaseList;
            if (content != undefined && content.singleCaseList != undefined && content.singleCaseList.length == btnSend.length - 1) {
                clearInterval(_contentUtils.GLOBALVAL.fun.interval);
                $('.batch-test-btn').off('click');
                $(document).on('click', '.batch-test-btn', function () {
                    var btnSend = $('.batch-test-btn');
                    var webResult = $('#plug-batch-in-result-js');
                    var index = btnSend.index($(this));
                    var caseList = {};
                    var env = JSON.parse($("#automated-text").text()).env;
                    if ($(this).attr('testing') == 'true') {
                        isBreak = false;
                        _contentUtils.GLOBALVAL.port.auto = chrome.runtime.connect({
                            name: "autoUiTest"
                        });

                        var data = {};
                        if (index == 0) {
                            caseList.singleCaseList = content.singleCaseList;
                        } else {
                            caseList.singleCaseList = [content.singleCaseList[index - 1]];
                        }
                        caseList.productType = _contentUtils.GLOBALVAL.product.productType;
                        caseList.version = _contentUtils.GLOBALVAL.product.version;
                        caseList.beforeCase = {
                            envCaseList: content.beforeCaseList || false,
                            env: env
                        };
                        caseList.afterCase = {
                            envCaseList: content.afterCaseList || false,
                            env: env
                        };
                        caseList.location = location;
                        caseList.index = index;
                        caseList.env = env;
                        caseList.commonFunList = _contentUtils.GLOBALVAL.info.commonFunList;
                        _contentUtils.GLOBALVAL.port.auto.postMessage(caseList);
                        _contentUtils.GLOBALVAL.port.auto.onMessage.addListener(function (backResult) {
                            if (backResult.afterCaseReportList.length == 0) {

                                for (i = 0; i < content.singleCaseList.length; i++) {
                                    if (backResult.responseList[i] != null) {} else {
                                        backResult.responseList[i] = null;
                                    }
                                }
                            }
                            if (!content.afterCaseList) {
                                content.afterCaseList = [];
                            }
                            if (index == 0) {
                                if (content.afterCaseList.length == 0) {
                                    for (var i = 0; i < backResult.responseList.length; i++) {
                                        if (backResult.responseList[i] == null) {
                                            backResult.status = 'testing';
                                        } else if (backResult.responseList[i].isStopTest) {
                                            backResult.status = 'tested';
                                            break;
                                        }
                                    }
                                } else {
                                    if (backResult.afterCaseReportList.length != content.afterCaseList.length) {
                                        backResult.status = 'testing';
                                    }
                                }
                                window.sessionStorage.setItem('plug-background-result', (0, _stringify2.default)(backResult));
                                plugDate = {
                                    responseList: [],
                                    status: backResult.status
                                };
                                webResult.text((0, _stringify2.default)(plugDate));
                                plugDate = {
                                    responseList: [],
                                    status: "tested"
                                };
                            } else {
                                if (content.afterCaseList.length == 0) {
                                    if (backResult.responseList[index - 1] == null) {
                                        backResult.status = 'testing';
                                    }
                                } else {
                                    if (backResult.afterCaseReportList.length != content.afterCaseList.length) {
                                        backResult.status = 'testing';
                                    }
                                }
                                plugDate.responseList[index - 1] = backResult.responseList[index - 1];
                                for (var i = backResult.responseList.length - 1; i >= 0; i--) {
                                    if (!plugDate.responseList[i]) {
                                        plugDate.responseList[i] = null;
                                    }
                                }
                                window.sessionStorage.setItem('plug-background-result', (0, _stringify2.default)(backResult));
                                plugDate = {
                                    responseList: [],
                                    status: backResult.status
                                };
                                webResult.text((0, _stringify2.default)(plugDate));
                            }
                            if (testType != 'envUi' && !isBreak && (_contentUtils.GLOBALVAL.product.productType == 1 || _contentUtils.GLOBALVAL.product.productType == 5 || _contentUtils.GLOBALVAL.product.productType == 2) && backResult.status == 'tested') {

                                isBreak = true;
                                if (index != 0) {
                                    backResult = backResult.responseList[index - 1];
                                }
                                var ajaxRequest = {
                                    caseID: _contentUtils.GLOBALVAL.info.hashArgs.caseID,
                                    companyHashKey: _contentUtils.GLOBALVAL.info.hashArgs.companyHashKey,
                                    spaceKey: _contentUtils.GLOBALVAL.info.hashArgs.spaceKey,
                                    projectHashKey: _contentUtils.GLOBALVAL.info.hashArgs.projectHashKey,
                                    result: (0, _stringify2.default)(backResult)
                                };
                                if (index !== 0) {
                                    ajaxRequest.connID = content.singleCaseList[index - 1].connID;
                                }
                                $.ajax({
                                    url: location + (index === 0 ? apiUrl1 : apiUrl2),
                                    method: 'POST',
                                    contentType: 'application/x-www-form-urlencoded;charset=UTF-8',
                                    data: ajaxRequest
                                }).done(function (successData, textStatus, xhr) {}).fail(function (xhr, textStatus) {
                                    isBreak = false;
                                    console.log('Add History Fail');
                                });
                            }
                        });
                    } else {
                        isBreak = true;
                        _contentUtils.GLOBALVAL.port.auto.postMessage({
                            index: index,
                            stopStatus: true
                        });
                    }
                });
            }
        }
        _contentUtils.GLOBALVAL.fun.interval = setInterval(query, 500);
    }
    queryBtn();
};

/***/ }),

/***/ 136:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.batchTest = undefined;

var _stringify = __webpack_require__(3);

var _stringify2 = _interopRequireDefault(_stringify);

var _contentUtils = __webpack_require__(30);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var batchTest = exports.batchTest = function batchTest() {
    _contentUtils.CONTENT_TOOLS.initFun();
    var plugDate = {
        responseList: [],
        status: "tested"
    };
    var content = {};
    var location = _contentUtils.GLOBALVAL.info.location.origin + _contentUtils.GLOBALVAL.info.location.pathname;
    var apiUrl = 'apiManagementPro/TestCase/getTestCaseList';
    var apiUrl1 = 'apiManagementPro/TestCase/addTestHistory';
    var changeFlagePrevious = 0;
    var isBreak = false;
    var isQuerying = false;
    switch (Number(_contentUtils.GLOBALVAL.product.productType)) {
        case 1:
        case 5:
            {

                apiUrl = 'apiManagementPro/TestCase/getTestCaseList';
                apiUrl1 = 'apiManagementPro/TestCase/addTestHistory';
                break;
            }
        default:
            {

                location = _contentUtils.GLOBALVAL.info.location.origin + _contentUtils.GLOBALVAL.info.location.pathname.replace(/independent\/$/i, '');
                apiUrl = _contentUtils.GLOBALVAL.info.prefixStr + 'apiManagementPro/TestCase/getTestCaseList';
                apiUrl1 = _contentUtils.GLOBALVAL.info.prefixStr + 'apiManagementPro/TestCase/addTestHistory';
            }
    }

    function getCaseList() {
        isQuerying = true;
        $.ajax({
            url: location + apiUrl,
            method: 'POST',
            contentType: 'application/x-www-form-urlencoded;charset=UTF-8',
            data: {
                companyHashKey: _contentUtils.GLOBALVAL.info.hashArgs.companyHashKey,
                spaceKey: _contentUtils.GLOBALVAL.info.hashArgs.spaceKey,
                projectHashKey: _contentUtils.GLOBALVAL.info.hashArgs.projectHashKey,
                apiID: _contentUtils.GLOBALVAL.info.hashArgs.apiID
            }
        }).done(function (successData, textStatus, xhr) {
            isQuerying = false;
            try {
                content = JSON.parse(successData);
            } catch (e) {
                content = successData;
            }
        }).fail(function (xhr, textStatus) {});
    }
    getCaseList();

    function clock() {
        var btnSend = $('.batch-test-btn');
        $('#automated-text').unbind('DOMCharacterDataModified');
        try {
            changeFlagePrevious = JSON.parse($("#automated-text").text()).flag;
        } catch (e) {}
        $('#automated-text').bind('DOMCharacterDataModified', function (e) {
            var webContent = JSON.parse($("#automated-text").text());
            if (changeFlagePrevious != webContent.flag) {
                getCaseList();
                changeFlagePrevious = webContent.flag;
            }
        });
        if (content != undefined && content.caseList != undefined && content.caseList.length == btnSend.length - 1) {
            $(document).on('click', '.batch-test-btn', function () {
                isBreak = false;
                btnSend = $('.batch-test-btn');
                var index = btnSend.index($(this));
                var env = JSON.parse($("#plug-batch-in-js").text()).env;
                var webResult = $("#plug-batch-in-result-js");

                if ($(this).attr('testing') == 'true') {

                    _contentUtils.GLOBALVAL.port.batch = chrome.runtime.connect({
                        name: "batchTest"
                    });

                    var data = {};
                    if (index == 0) {

                        data = content;
                    } else {
                        data.caseList = [content.caseList[index - 1]];
                    }
                    data.env = env;
                    data.commonFunList = _contentUtils.GLOBALVAL.info.commonFunList;
                    data.index = index;
                    data.productType = _contentUtils.GLOBALVAL.product.productType;
                    data.version = _contentUtils.GLOBALVAL.product.version;
                    _contentUtils.GLOBALVAL.port.batch.postMessage(data);
                    _contentUtils.GLOBALVAL.port.batch.onMessage.addListener(function (backResult) {
                        for (i = 0; i < content.caseList.length; i++) {
                            if (backResult.responseList[i] != null) {} else {
                                backResult.responseList[i] = null;
                            }
                        }
                        if (index == 0) {

                            for (var i = backResult.responseList.length - 1; i >= 0; i--) {
                                if (backResult.responseList[i] == null) {
                                    backResult.status = 'testing';
                                }
                            }
                            window.sessionStorage.setItem('plug-background-result', (0, _stringify2.default)(backResult));
                            plugDate = {
                                responseList: [],
                                status: backResult.status
                            };
                            webResult.text((0, _stringify2.default)(plugDate));
                            plugDate = {
                                responseList: [],
                                status: "tested"
                            };
                        } else {

                            plugDate.responseList[index - 1] = backResult.responseList[index - 1];
                            for (var i = backResult.responseList.length - 1; i >= 0; i--) {
                                if (!plugDate.responseList[i]) {
                                    plugDate.responseList[i] = null;
                                }
                            }
                            window.sessionStorage.setItem('plug-background-result', (0, _stringify2.default)(backResult));
                            plugDate = {
                                responseList: [],
                                status: backResult.status
                            };
                            webResult.text((0, _stringify2.default)(plugDate));
                        }
                        if (backResult.status == 'tested' && !isBreak) {
                            var result = [];
                            if (index == 0) {
                                content.caseList.forEach(function (val, key) {
                                    result.push({
                                        caseID: val.caseID,
                                        result: backResult.responseList[key]
                                    });
                                });
                            } else {
                                result = [{
                                    caseID: content.caseList[index - 1].caseID,
                                    result: backResult.responseList[index - 1]
                                }];
                            }
                            $.ajax({
                                url: location + apiUrl1,
                                method: 'POST',
                                contentType: 'application/x-www-form-urlencoded;charset=UTF-8',
                                data: {
                                    companyHashKey: _contentUtils.GLOBALVAL.info.hashArgs.companyHashKey,
                                    spaceKey: _contentUtils.GLOBALVAL.info.hashArgs.spaceKey,
                                    projectHashKey: _contentUtils.GLOBALVAL.info.hashArgs.projectHashKey,
                                    apiID: _contentUtils.GLOBALVAL.info.hashArgs.apiID,
                                    result: (0, _stringify2.default)(result)
                                }
                            }).done(function (successData, textStatus, xhr) {}).fail(function (xhr, textStatus) {});
                        }
                    });
                } else {
                    isBreak = true;
                    _contentUtils.GLOBALVAL.port.batch.postMessage({
                        index: index,
                        stopStatus: true
                    });
                };
            });
            window.clearInterval(_contentUtils.GLOBALVAL.fun.interval);
        }
    }
    _contentUtils.GLOBALVAL.fun.interval = setInterval(clock, 100);
};

/***/ }),

/***/ 137:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.autoCodeTest = undefined;

var _stringify = __webpack_require__(3);

var _stringify2 = _interopRequireDefault(_stringify);

var _contentUtils = __webpack_require__(30);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var autoCodeTest = exports.autoCodeTest = function autoCodeTest(testType) {
    _contentUtils.CONTENT_TOOLS.initFun();
    var plugDate = {
        responseList: [],
        status: "tested"
    };
    var content = {};
    var location = _contentUtils.GLOBALVAL.info.location.origin + _contentUtils.GLOBALVAL.info.location.pathname;
    var apiUrl1 = 'automatedTest/AutomatedTestHistory/addTestLog';
    var isBreak = false;
    switch (Number(_contentUtils.GLOBALVAL.product.productType)) {
        case 1:
        case 5:
            {
                apiUrl1 = 'automatedTest/AutomatedTestHistory/addTestLog';
                break;
            }
        case 0:
            {
                location = _contentUtils.GLOBALVAL.info.location.origin + _contentUtils.GLOBALVAL.info.location.pathname.replace(/index\.php$/i, '');
                break;
            }
        case 2:
            {
                location = _contentUtils.GLOBALVAL.info.location.origin + _contentUtils.GLOBALVAL.info.location.pathname.replace(/independent\/$/i, '');
                apiUrl1 = _contentUtils.GLOBALVAL.info.prefixStr + 'automatedTest/AutomatedTestHistory/addTestLog';
                break;
            }
    }

    function queryBtn() {
        function query() {
            var btnSend = $('button.batch-test-btn');
            if (btnSend.length != 0) {
                clearInterval(_contentUtils.GLOBALVAL.fun.interval);
                $('.batch-test-btn').off('click');
                $('.batch-test-btn').on('click', function () {
                    isBreak = false;
                    var content = window.sessionStorage.getItem('plug-autoTest-code');
                    var btnSend = $('.batch-test-btn');
                    var caseCodeList = {};
                    var webResult = $("#plug-batch-in-result-js");
                    content = JSON.parse(content);
                    if ($(this).attr('testing') == 'true') {
                        _contentUtils.GLOBALVAL.port.autoCode = chrome.runtime.connect({
                            name: "autoCodeTest"
                        });

                        caseCodeList.caseCode = content.caseCode;
                        caseCodeList.beforeCase = {
                            envCaseList: content.beforeCaseList || false,
                            env: content.env

                        };
                        caseCodeList.afterCase = {
                            envCaseList: content.afterCaseList || false,
                            env: content.env
                        };
                        caseCodeList.productType = _contentUtils.GLOBALVAL.product.productType;
                        caseCodeList.version = _contentUtils.GLOBALVAL.product.version;
                        caseCodeList.env = content.env;
                        caseCodeList.commonFunList = _contentUtils.GLOBALVAL.info.commonFunList;
                        _contentUtils.GLOBALVAL.port.autoCode.postMessage(caseCodeList);
                        _contentUtils.GLOBALVAL.port.autoCode.onMessage.addListener(function (backResult) {
                            window.sessionStorage.setItem('plug-background-result', (0, _stringify2.default)(backResult));
                            plugDate = {
                                status: 'tested'
                            };
                            webResult.text((0, _stringify2.default)(plugDate));
                            if (testType != 'envCode' && !isBreak && (_contentUtils.GLOBALVAL.product.productType == 1 || _contentUtils.GLOBALVAL.product.productType == 5 || _contentUtils.GLOBALVAL.product.productType == 2)) {
                                isBreak = true;
                                $.ajax({
                                    url: location + apiUrl1,
                                    method: 'POST',
                                    contentType: 'application/x-www-form-urlencoded;charset=UTF-8',
                                    data: {
                                        caseID: _contentUtils.GLOBALVAL.info.hashArgs.caseID,
                                        companyHashKey: _contentUtils.GLOBALVAL.info.hashArgs.companyHashKey,
                                        spaceKey: _contentUtils.GLOBALVAL.info.hashArgs.spaceKey,
                                        projectHashKey: _contentUtils.GLOBALVAL.info.hashArgs.projectHashKey,
                                        result: (0, _stringify2.default)(backResult)
                                    }
                                }).done(function (successData, textStatus, xhr) {}).fail(function (xhr, textStatus) {
                                    isBreak = false;
                                    console.log('Add History Fail');
                                });
                            }
                        });
                    } else {
                        isBreak = true;
                        _contentUtils.GLOBALVAL.port.autoCode.postMessage({
                            stopStatus: true
                        });
                    }
                });
            }
        }
        _contentUtils.GLOBALVAL.fun.interval = setInterval(query, 500);
    }
    queryBtn();
};

/***/ }),

/***/ 138:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.normalTest = undefined;

var _stringify = __webpack_require__(3);

var _stringify2 = _interopRequireDefault(_stringify);

var _contentUtils = __webpack_require__(30);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var normalTest = exports.normalTest = function normalTest(type) {
    _contentUtils.CONTENT_TOOLS.initFun();
    var isProcess = false;

    function clock() {
        if ($('.send-btn').length > 0) {
            window.clearInterval(_contentUtils.GLOBALVAL.fun.interval);
            $('.send-btn').on("click", function () {
                function addTestHistory(time, requestInfo, resultInfo) {
                    if (_contentUtils.GLOBALVAL.product.productType != 0) {
                        try {
                            var location = _contentUtils.GLOBALVAL.info.location.origin + _contentUtils.GLOBALVAL.info.location.pathname;
                            var apiUrl = '';
                            resultInfo = JSON.parse(resultInfo);
                            switch (Number(_contentUtils.GLOBALVAL.product.productType)) {
                                case 1:
                                case 5:
                                    {
                                        if (_contentUtils.GLOBALVAL.info.location.hash.indexOf('quickTest') > -1 && !_contentUtils.GLOBALVAL.info.hashArgs.apiID) {
                                            apiUrl = "apiManagementPro/QuickTest/addTestHistory";
                                        } else {
                                            apiUrl = 'apiManagementPro/Test/addTestHistory';
                                        }
                                        break;
                                    }
                                case 2:
                                    {
                                        location = _contentUtils.GLOBALVAL.info.location.origin + _contentUtils.GLOBALVAL.info.location.pathname.replace(/independent\/$/i, '');
                                        if (_contentUtils.GLOBALVAL.info.location.hash.indexOf('quickTest') > -1 && !_contentUtils.GLOBALVAL.info.hashArgs.apiID) {
                                            apiUrl = _contentUtils.GLOBALVAL.info.prefixStr + "apiManagementPro/QuickTest/addTestHistory";
                                        } else {
                                            apiUrl = _contentUtils.GLOBALVAL.info.prefixStr + 'apiManagementPro/Test/addTestHistory';
                                        }
                                    }
                            }
                            var requestData = {
                                apiProtocol: "0",
                                URL: resultInfo.requestBody.url,
                                headers: resultInfo.requestBody.historyHeaders,
                                requestType: resultInfo.requestBody.params.requestType,
                                params: resultInfo.requestBody.historyParams,
                                method: _contentUtils.CONTENT_TOOLS.judgeRequestMethod(requestInfo.requestInfo.apiRequestType),
                                methodType: requestInfo.requestInfo.apiRequestType
                            };
                            var responseData = {
                                headers: resultInfo.testResult.headers,
                                body: resultInfo.testResult.body,
                                httpCode: resultInfo.testHttpCode,
                                testDeny: resultInfo.testDeny
                            };
                            $.ajax({
                                url: location + apiUrl,
                                method: 'POST',
                                contentType: 'application/x-www-form-urlencoded;charset=UTF-8',
                                data: {
                                    companyHashKey: _contentUtils.GLOBALVAL.info.hashArgs.companyHashKey,
                                    spaceKey: _contentUtils.GLOBALVAL.info.hashArgs.spaceKey,
                                    projectHashKey: _contentUtils.GLOBALVAL.info.hashArgs.projectHashKey,
                                    apiID: _contentUtils.GLOBALVAL.info.hashArgs.apiID,
                                    testTime: time,
                                    requestInfo: (0, _stringify2.default)(requestData),
                                    resultInfo: (0, _stringify2.default)(responseData),
                                    beforeInject: requestInfo.script.before,
                                    afterInject: requestInfo.script.after
                                }
                            }).done(function (successData, textStatus, xhr) {}).fail(function (xhr, textStatus) {});
                        } catch (e) {
                            console.log(e);
                        }
                    }
                }
                if (!isProcess) {
                    _contentUtils.GLOBALVAL.port.normal = chrome.runtime.connect({
                        name: "normalTest"
                    });
                    var data = window.sessionStorage.getItem('plug-normalTest-info') || $("#plug-in-js").text();
                    if (data) {
                        isProcess = true;
                        data = JSON.parse(data);
                        data.commonFunList = _contentUtils.GLOBALVAL.info.commonFunList;
                        data.productType = _contentUtils.GLOBALVAL.product.productType;
                        data.version = _contentUtils.GLOBALVAL.product.version;
                        var time = _contentUtils.CONTENT_TOOLS.getTime();
                        _contentUtils.GLOBALVAL.port.normal.postMessage(data);
                        _contentUtils.GLOBALVAL.port.normal.onMessage.addListener(function (request, sender, sendResponse) {
                            if (isProcess) {
                                var webResult = $("#plug-in-result-js");
                                if (request.statusCode == "210000") {
                                    console.log("请求发送失败，请正确填写接口信息");
                                }
                                window.sessionStorage.setItem('plug-background-result', request.backResult);
                                if (_contentUtils.GLOBALVAL.product.productType == 0 || _contentUtils.GLOBALVAL.product.productType == 3) {
                                    webResult.text(request.backResult);
                                } else {
                                    webResult.text(1);
                                }
                                isProcess = false;
                                var statusCode = JSON.parse(request.backResult).statusCode;
                                if (statusCode == "000000" && type != 'share') {
                                    addTestHistory(time, data, request.backResult);
                                }
                            }
                        });
                    }
                } else {
                    isProcess = false;
                    _contentUtils.GLOBALVAL.port.normal.postMessage({
                        stopStatus: true
                    });
                }
            });
        }
    }
    _contentUtils.GLOBALVAL.fun.interval = setInterval(clock, 100);
};

/***/ }),

/***/ 30:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CONTENT_TOOLS = exports.GLOBALVAL = undefined;

var _os = __webpack_require__(134);

var GLOBALVAL = exports.GLOBALVAL = {
    product: {
        productType: 1,
        hasConsole: false,
        version: true
    },
    info: {

        prefixStr: 'index.php/',
        commonFunList: null,
        hashArgs: null,
        location: {}
    },
    port: {
        batch: null,
        auto: null,
        autoCode: null,
        normal: null
    },
    fun: {
        interval: null,
        interval1: null
    }
};
var CONTENT_TOOLS = exports.CONTENT_TOOLS = {
    initFun: function initFun() {

        window.sessionStorage.removeItem('plug-normalTest-info');
        window.sessionStorage.removeItem('plug-autoTest-code');
        window.sessionStorage.removeItem("plug-background-result");
        clearInterval(GLOBALVAL.fun.interval);
        clearInterval(GLOBALVAL.fun.interval1);
        $(document).off('click');
        try {
            if (GLOBALVAL.port.auto) {
                GLOBALVAL.port.auto.disconnect();
            }
            if (GLOBALVAL.port.batch) {
                GLOBALVAL.port.batch.disconnect();
            }
            if (GLOBALVAL.port.autoCode) {
                GLOBALVAL.port.autoCode.disconnect();
            }
            if (GLOBALVAL.port.normal) {
                GLOBALVAL.port.normal.disconnect();
            }
        } catch (e) {
            console.log(e);
        }
    },
    judgeRequestMethod: function judgeRequestMethod(methodId) {
        var method = "POST";
        switch (methodId.toString()) {
            case '1':
                method = "GET";
                break;
            case '2':
                method = "PUT";
                break;
            case '3':
                method = "DELETE";
                break;
            case '4':
                method = "HEAD";
                break;
            case '5':
                method = "OPTIONS";
                break;
            case '6':
                method = "PATCH";
                break;
            default:
                method = "POST";
        }
        return method;
    },
    getProductInfo: function getProductInfo() {

        var productType = false;
        var version = false;

        var productInfo = {
            version: false,
            productType: 1
        };
        try {
            productType = $('meta[name="product-type"]')[0].content;
        } catch (e) {}
        try {
            version = $('meta[name="version"]')[0].content;
        } catch (e) {}
        if (productType) {

            productInfo.productType = productType;
        } else {
            productInfo.productType = false;
        }
        if (version) {
            if (productInfo.productType == 2 && /\d+/.test(version)) {
                if (version < 20180910) {
                    productInfo.version = '4.1';
                } else {
                    productInfo.version = '4.1+';
                }
            } else {
                productInfo.version = version;
            }
        }
        return productInfo;
    },
    getHashStringArgs: function getHashStringArgs() {
        var hashStrings = [],
            hashArgs = {};
        var items = [],
            item = null,
            name = null,
            value = null,
            i = 0,
            len = 0;
        hashStrings = window.location.hash;
        if (hashStrings.indexOf('?') > -1) {
            items = hashStrings.split("?");
            items = items[1].split("&");
            len = items.length;
            for (i = 0; i < len; i++) {
                item = items[i].split("=");
                name = decodeURIComponent(item[0]);
                value = decodeURIComponent(item[1]);
                if (name.length > 0) {
                    hashArgs[name] = value;
                }
            }
        }
        return hashArgs;
    },
    getTime: function getTime() {
        var data = {
            fun: {
                getTime: null
            }
        };
        data.fun.getTime = function () {
            var template = {
                info: {
                    date: new Date(),
                    time: {
                        year: null,
                        month: null,
                        day: null,
                        hour: null,
                        minute: null,
                        second: null
                    },
                    string: null
                }
            };
            template.info.time.year = template.info.date.getFullYear();
            template.info.time.month = template.info.date.getMonth() + 1;
            template.info.time.day = template.info.date.getDate();

            template.info.time.hour = template.info.date.getHours();
            template.info.time.minute = template.info.date.getMinutes();
            template.info.time.second = template.info.date.getSeconds();

            template.info.string = template.info.time.year + "-";

            if (template.info.time.month < 10) template.info.string += "0";

            template.info.string += template.info.time.month + "-";

            if (template.info.time.day < 10) template.info.string += "0";

            template.info.string += template.info.time.day + " ";

            if (template.info.time.hour < 10) template.info.string += "0";

            template.info.string += template.info.time.hour + ":";
            if (template.info.time.minute < 10) template.info.string += '0';
            template.info.string += template.info.time.minute + ":";
            if (template.info.time.second < 10) template.info.string += '0';
            template.info.string += template.info.time.second;
            return template.info.string;
        };
        return data.fun.getTime();
    },
    judgeWhichTest: function judgeWhichTest() {

        var nowUrl = window.location.href;
        var patt1 = /(\/api\/test)|(\/quickTest)/i,
            patt2 = /\/api\/case/i,
            patt3 = /\/scene\/api\/env/i,
            patt4 = /(\/scene\/api)|(\/cenario\/api)/i,
            patt5 = /(scene\/mode\/env)|(cenario\/mode\/env)/i,
            patt6 = /(\/scene\/mode\/)|(scene\/mode\/advanced)|(cenario\/mode\/advanced)|(\/test\/mode\/advanced)/i,
            patt7 = /(\/inside\/test\/default\?)|(\/automatic\/inside\/cenario\/\?)|(\/automatic\/inside\/scene\/\?)/i,
            patt8 = /(\/share\/project\/test)|(\/share\/project\/api\/test)/i;
        var status1 = patt1.test(nowUrl),
            status2 = patt2.test(nowUrl),
            status3 = patt3.test(nowUrl),
            status4 = patt4.test(nowUrl),
            status5 = patt5.test(nowUrl),
            status6 = patt6.test(nowUrl),
            status7 = patt7.test(nowUrl),
            status8 = patt8.test(nowUrl);
        if (status1) {
            return 'normal';
        } else if (status2) {
            return 'case';
        } else if (status3) {
            return 'envUi';
        } else if (status4) {
            return 'autoUi';
        } else if (status5) {
            return 'envCode';
        } else if (status6) {
            return 'autoCode';
        } else if (status7) {
            return 'autoBatch';
        } else if (status8) {
            return 'share';
        }
    }
};

/***/ })

},[133]);